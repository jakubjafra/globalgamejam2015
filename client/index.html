<head>
</head>

<body>
	{{> Chat}}
	{{> Viewport}}
</body>

<template name="Chat">
	<div id="chat">
		<div class="list">
			{{#each chatList}}
				<div>
					{{ what }}
				</div>
			{{/each}}
		</div>
		<input id="chat_input" type="text" placeholder="chat input" focused />
		timeleft: {{ turnTimeleft }}
		<div class="list">
			{{#each commandsList}}
				<div>
					{{ what }} ({{ seq }})
				</div>
			{{/each}}
		</div>
	</div>
</template>

<template name="Viewport">
	<div id="viewport" style="width: {{ viewport.width }}px; height: {{ viewport.height }}px;">
		{{> Player}}

		<div id="map" style="top: {{ viewportOffsetTop }}px; left: {{ viewportOffsetLeft }}px;">
			{{#each mapTilesList}}
				{{> Tile}}
			{{/each}}
			{{#each mapObjsList}}
				{{> Obj}}
			{{/each}}
		</div>

		{{> Combat}}
	</div>
</template>

<template name="Combat">
	{{#if isCombatMode}}
	<div id="combat_box">
		COMBATBOX
	</div>
	{{/if}}
</template>

<template name="Player">
	<div id="{{ id }}" class="map_object player {{ objLastMovement }}" style="{{ movementTransition }}">
		<img class="" src="/animacje/single_shoot.png" style="display: none;">
	</div>
</template>

<template name="Obj">
	<div id="{{ id }}" class="map_object {{ objClass }} {{ objLastMovement }}" style="top: {{ topXY }}px; left: {{ leftXY }}px; {{ movementTransition }}">
		<img class="" src="/animacje/single_shoot.png" style="display: none;">
	</div>
</template>

<template name="Tile">
	{{#if isNotMare}}
		<div id="{{ id }}" class="map_tile {{ tileClass }}" style="top: {{ topXY }}px; left: {{ leftXY }}px;">
			{{#if isMerchantIsland}}
				<img src="/mapa/wyspa_kupiecka_przezroczysta_bez_fal.png" style="display: none">
			{{/if}}
			{{#if isMurzynskaIsland}}
				<img src="/mapa/wyspa_murzynow_bez_fal.png" style="display: none">
			{{/if}}
			{{#if isSiren}}
				<img src="/animacje/cum_to_me.png">
			{{/if}}
			<div></div>
		</div>
	{{/if}}
</template>